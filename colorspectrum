# -*- coding: utf-8 -*-
"""
Created on Mon Jul 17 09:53:03 2023

@author: carlo
"""

# -*- coding: utf-8 -*-
"""
Created on Fri Jul 14 09:36:27 2023

@author: carlo
"""

############GRAFICA EL ESPECTRO DE COLORES DE TODA LA CARPETA###############
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

import pathlib #librería para cargar datos
import numpy as np
import pandas as pd

import matplotlib.pyplot as plt
from scipy.fftpack import fft, ifft
import scipy

from PIL import Image as im

from scipy.signal import butter,lfilter,freqz
from scipy.signal import find_peaks


ejemplo_dir = 'C:/Users/carlo/Documents/MUESTRAS_ECG/DATOS_ORIGINALES_SEÑAL' #carpeta donde están los datos
sample = np.array(ejemplo_dir).flatten()
#tiene que estar en la nube con permisos ilimitados
directorio = pathlib.Path(ejemplo_dir)
señales=[]

def graficspect(i):
###############espectograma de colores
    plt.specgram(np.array(i).flatten() , Fs=195, cmap="gray")
    # plt.title('Espectograma de una señal ECG')
    # plt.xlabel("DATOS")
    # plt.ylabel("TIEMPO")
    plt.axis("off")
    cbar = plt.colorbar()
    #cbar.set_label('Etiquetas de colores')
    plt.show()


for fichero in directorio.iterdir():
    #señales.append(fichero)
    datos=pd.read_csv(fichero,names=[fichero.name])
    #if len(datos)>60 and len(datos)<120:
    sample = datos
    sample_inverted= -1*datos
    señales.append(sample_inverted)

for i in señales:
    graficspect(i)
